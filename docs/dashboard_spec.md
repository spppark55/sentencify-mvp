# ğŸ“Š **ëŒ€ì‹œë³´ë“œ ì§€í‘œ ëª…ì„¸ì„œ (Dashboard Metrics Specification)**

- **ì ìš© ì•„í‚¤í…ì²˜:** v2.4 (Streamlit Sidecar Pattern)
- **ê¸°ìˆ  ìŠ¤íƒ:** Streamlit (Python), Plotly, MongoDB/Redis/DWH Direct Query(mongoDBê°€ DWH)

---

## **1. ê°œìš” (Overview)**

### **1.1 ëª©ì **

ë³¸ ëŒ€ì‹œë³´ë“œëŠ” Sentencify ì‹œìŠ¤í…œì˜ **"ê¸°ìˆ ì  ì•ˆì •ì„±"**ì„ ë„˜ì–´, ìˆ˜ì§‘ëœ ë°ì´í„°ê°€ ê¸°ì—…ì— ì£¼ëŠ” **"ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜(Business Value)"**ë¥¼ ì‹œê°ì ìœ¼ë¡œ ì¦ëª…í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.

### **1.2 ì•„í‚¤í…ì²˜ ì›ì¹™ (Sidecar Pattern)**

- **Zero-Touch:** ê¸°ì¡´ ë°±ì—”ë“œ API ë¡œì§ì„ ì „í˜€ ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.
- **Read-Only:** ëŒ€ì‹œë³´ë“œëŠ” ì˜¤ì§ DB(Mongo, Redis,)ì— ëŒ€í•œ **ì½ê¸° ê¶Œí•œ**ë§Œ ê°€ì§„ë‹¤.
- **Admin-Only:** ì¼ë°˜ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë˜ì§€ ì•Šìœ¼ë©°, ë³„ë„ í¬íŠ¸/ì¸ì¦ì„ í†µí•´ ê´€ë¦¬ìë§Œ ì ‘ê·¼í•œë‹¤.

---

## **2. Phaseë³„ ì‹œê°í™” ëª…ì„¸**

### **ğŸŸ¦ Phase 1: ì„œë¹„ìŠ¤ ì•ˆì •ì„± ë° ìˆ˜ì§‘ í˜„í™©**

- **í•µì‹¬ ë©”ì‹œì§€:** "ì‹œìŠ¤í…œì´ ì •ìƒ ì‘ë™ ì¤‘ì´ë©°, ê¸°ì´ˆ ë°ì´í„°ê°€ ìŒ“ì´ê³  ìˆìŠµë‹ˆë‹¤."
- **ì£¼ìš” ë°ì´í„° ì†ŒìŠ¤:** `A` (ì¶”ì²œ ë¡œê·¸), `I` (ì‹œìŠ¤í…œ ë¡œê·¸), `E` (Micro Context)

| **ì§€í‘œëª… (Metric)** | **ì„¤ëª…** | **ì‹œê°í™” ë°©ì‹** | **ì¿¼ë¦¬ ë¡œì§ (Pseudo)** |
| --- | --- | --- | --- |
| **Total Traffic** | ëˆ„ì  ì¶”ì²œ ìš”ì²­ ìˆ˜ | **Big Number** | `count(A)` |
| **Micro Contexts** | ìˆ˜ì§‘ëœ ë¬¸ì¥/ë²¡í„° ìì‚° ê·œëª¨ | **Big Number** | `count(E)` |
| **Category Dist.** | ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë¬¸ì¥ì˜ ì¹´í…Œê³ ë¦¬ ë¶„í¬ | **Donut Chart** | `group_by(A.reco_category_input)` |
| **System Latency** | ì¶”ì²œ APIì˜ í‰ê·  ì‘ë‹µ ì†ë„ ì¶”ì´ | **Line Chart** | `avg(I.latency_ms)` per hour |

---

### **ğŸŸ¦ğŸŸ© Phase 1.5: ì§€ëŠ¥í˜• ë¶„ì„ ë° ì ì‘í˜• ìŠ¤ì½”ì–´ë§**

- **í•µì‹¬ ë©”ì‹œì§€:** "ë¬¸ì„œì˜ ë§¥ë½(Context)ì„ ì´í•´í•˜ê³ , ê¸¸ì´ì— ë”°ë¼ ë˜‘ë˜‘í•˜ê²Œ ë°˜ì‘í•©ë‹ˆë‹¤."
- **ì£¼ìš” ë°ì´í„° ì†ŒìŠ¤:** `K` (ë¬¸ì„œ ì›ë³¸), `F` (Macro Cache), `I` (Adaptive Log)

| **ì§€í‘œëª… (Metric)** | **ì„¤ëª…** | **ì‹œê°í™” ë°©ì‹** | **ì¿¼ë¦¬ ë¡œì§ (Pseudo)** |
| --- | --- | --- | --- |
| **Macro ETL Trigger** | ëŒ€ëŸ‰ ìˆ˜ì •ìœ¼ë¡œ ì¸í•œ AI ì¬ë¶„ì„ íšŸìˆ˜ | **Bar Chart** | `count(I)` where `diff_ratio >= 0.1` |
| **Drafting vs Polishing** | ìœ ì €ê°€ 'ë§‰ ì“°ëŠ” ì¤‘(Draft)'ì¸ì§€ 'ë‹¤ë“¬ëŠ” ì¤‘(Polish)'ì¸ì§€ ë¹„ìœ¨ ë¶„ì„ | **Histogram** | `K.diff_ratio` ë¶„í¬ (0.1 ê¸°ì¤€) |
| **Adaptive Weight ($\alpha$)** | ë¬¸ì„œ ê¸¸ì´ì— ë”°ë¥¸ Macro ë°˜ì˜ ë¹„ì¤‘ | **Scatter Plot** | X: `doc_len`, Y: `I.applied_weight_doc` |
| **Cache Hit Rate** | Redis ìºì‹œ ì ì¤‘ë¥  (ì¬ì‚¬ìš© íš¨ìœ¨) | **Gauge Chart** | `I.cache_hit_macro` True ë¹„ìœ¨ |

---

### **ğŸŸ¦ğŸŸ¨ Phase 2: ë°ì´í„° ìì‚°í™” ë° í’ˆì§ˆ ê´€ë¦¬**

- **í•µì‹¬ ë©”ì‹œì§€:** "í•™ìŠµ ê°€ëŠ¥í•œ ê³ í’ˆì§ˆ ë°ì´í„°(Golden Data)ê°€ ìì‚°ìœ¼ë¡œ ìŒ“ì´ê³  ìˆìŠµë‹ˆë‹¤."
- **ì£¼ìš” ë°ì´í„° ì†ŒìŠ¤:** `H` (í•™ìŠµ ë°ì´í„°), `G` (ìœ ì € í”„ë¡œí•„), `C` (ì„ íƒ ë¡œê·¸)

| **ì§€í‘œëª… (Metric)** | **ì„¤ëª…** | **ì‹œê°í™” ë°©ì‹** | **ì¿¼ë¦¬ ë¡œì§ (Pseudo)** |
| --- | --- | --- | --- |
| **Golden Data Count** | ì •í•©ì„±ì´ ê²€ì¦ëœ ê³ í’ˆì§ˆ í•™ìŠµ ë°ì´í„° ìˆ˜ | **Area Chart** | `count(H)` where `consistency="high"` |
| **Acceptance Rate** | ìœ ì €ê°€ 1ìˆœìœ„ ì¶”ì²œì„ ì‹¤ì œë¡œ ì„ íƒí•œ ë¹„ìœ¨ | **Trend Line** | `C.was_accepted` / `count(A)` |
| **User Coverage** | í”„ë¡œí•„ ë¶„ì„ì´ ì™„ë£Œëœ ìœ ì € ì»¤ë²„ë¦¬ì§€ | **Progress Bar** | `count(G)` / `count(Unique Users)` |
| **Correction Funnel** | ì¡°íšŒ â†’ ì‹¤í–‰ â†’ ì„ íƒ ì „í™˜ìœ¨ | **Funnel Chart** | `A` â†’ `B` â†’ `C` ë‹¨ê³„ë³„ ì¹´ìš´íŠ¸ |

---

### **ğŸŸ¦ğŸŸ§ Phase 3: ìœ ì € í”„ë¡œíŒŒì¼ë§ (Personalization)**

- **í•µì‹¬ ë©”ì‹œì§€:** "ì‚¬ìš©ìë“¤ì˜ ì„±í–¥ì„ êµ°ì§‘í™”í•˜ì—¬ ì´í•´í•˜ê³  ìˆìŠµë‹ˆë‹¤."
- **ì£¼ìš” ë°ì´í„° ì†ŒìŠ¤:** `G` (ìœ ì € ì„ë² ë”©), `J` (í´ëŸ¬ìŠ¤í„°)

| **ì§€í‘œëª… (Metric)** | **ì„¤ëª…** | **ì‹œê°í™” ë°©ì‹** | **ì¿¼ë¦¬ ë¡œì§ (Pseudo)** |
| --- | --- | --- | --- |
| **User Cluster Map** | ìœ ì € ì„±í–¥ êµ°ì§‘ ì§€ë„ (t-SNE ì°¨ì›ì¶•ì†Œ) | **2D Scatter** | `G.user_embedding_v1` ì‹œê°í™” |
| **Cluster Tendency** | êµ°ì§‘ë³„ ì„ í˜¸ ìŠ¤íƒ€ì¼ (ê²©ì‹ì²´ vs êµ¬ì–´ì²´ ë“±) | **Radar Chart** | `J.style_distribution` |
| **Personalization Lift** | ê°œì¸í™” ì ìš© ì „í›„ ìˆ˜ìš©ë¥  ìƒìŠ¹í­ | **Bar Chart** | `Accept Rate (Phase 2 vs 3)` |

---

### **ğŸŸ¥ Phase 4: ìƒì„±í˜• ìë™í™” (Automation)**

- **í•µì‹¬ ë©”ì‹œì§€:** "AIê°€ ìœ ì €ì˜ ì—…ë¬´ ì‹œê°„ì„ íšê¸°ì ìœ¼ë¡œ ë‹¨ì¶•ì‹œì¼°ìŠµë‹ˆë‹¤."
- **ì£¼ìš” ë°ì´í„° ì†ŒìŠ¤:** `B` (ìë™ìƒì„± ë¡œê·¸), `C` (ì„ íƒ ë¡œê·¸)

| **ì§€í‘œëª… (Metric)** | **ì„¤ëª…** | **ì‹œê°í™” ë°©ì‹** | **ì¿¼ë¦¬ ë¡œì§ (Pseudo)** |
| --- | --- | --- | --- |
| **Zero-Shot Acceptance** | ìœ ì €ê°€ ìˆ˜ì • ì—†ì´ AI ì œì•ˆì„ ì¦‰ì‹œ ìˆ˜ë½í•œ ë¹„ìœ¨ | **Donut Chart** | `C` where `is_auto_prompt=True` |
| **Keystrokes Saved** | ìë™í™”ë¡œ ì¸í•´ ì ˆì•½ëœ ì´ íƒ€ì´í•‘ íšŸìˆ˜ | **Big Number** | `sum(len(accepted_text))` |
| **Auto-Style Trends** | AIê°€ ì£¼ë¡œ ì œì•ˆí•˜ëŠ” ì¸ê¸° ìŠ¤íƒ€ì¼ íŠ¸ë Œë“œ | **Treemap** | `B.auto_generated_prompt` í‚¤ì›Œë“œ |
| **ROI / Token Efficiency** | í† í° ë¹„ìš© ëŒ€ë¹„ ìˆ˜ìš© íš¨ê³¼ (ë¹„ìš© íš¨ìœ¨ì„±) | **Line Chart** | `Accepted Count` / `Token Usage` |

---

## **3. êµ¬í˜„ ê°€ì´ë“œ**

### **(1) ë””ë ‰í† ë¦¬ êµ¬ì¡°**

```markdown
sentencify-mvp/
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ app.py           # Streamlit ë©”ì¸ ì—”íŠ¸ë¦¬
â”‚   â”œâ”€â”€ pages/           # í˜ì´ì§€ ë¶„ë¦¬
â”‚   â”‚   â”œâ”€â”€ 1_Overview.py
â”‚   â”‚   â”œâ”€â”€ 2_Data_Assets.py
â”‚   â”‚   â””â”€â”€ 3_User_Insights.py
â”‚   â”œâ”€â”€ queries/         # DB ì¡°íšŒ ë¡œì§ ë¶„ë¦¬ (pymongo, redis)
â”‚   â”œâ”€â”€ components/      # ì¬ì‚¬ìš© ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ Dockerfile
â””â”€â”€ docker-compose.yml   # dashboard ì„œë¹„ìŠ¤ ì¶”ê°€
```

### **(2) ë°ì´í„° ì¡°íšŒ ì „ëµ**

- **ì‹¤ì‹œê°„ì„±:** `TTL=5m` ì •ë„ì˜ ìºì‹±(`@st.cache_data`)ì„ ì‚¬ìš©í•˜ì—¬ DB ë¶€í•˜ ë°©ì§€.
- **ëŒ€ìš©ëŸ‰ ì²˜ë¦¬:** `H`ë‚˜ `A` í…Œì´ë¸”ì´ ì»¤ì§ˆ ê²½ìš°, Streamlitì—ì„œ `limit`ì„ ê±¸ê±°ë‚˜ ì§‘ê³„ ì¿¼ë¦¬(`aggregate`)ë§Œ ì‹¤í–‰í•˜ë„ë¡ ìµœì í™” í•„ìš”.